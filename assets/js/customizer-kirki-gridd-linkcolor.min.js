wp.customize.controlConstructor["gridd-wcag-lc"]=wp.customize.Control.extend({hue:0,allColors:!1,colors:{},ready:function(){this.setHue(),this.updateColors(!1),this.initAuto()},embed:function(){var e=this,t=e.section();t&&wp.customize.section(t,function(t){t.expanded.bind(function(t){t&&e.actuallyEmbed()})})},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve())},initAuto:function(){var e=this;e.setHue(),this.updateColors(!1),this.container.find(".kirki-input-container.auto").show(),this.container.find(".color-hue-container").html('<input class="color-hue" type="text" data-type="hue" value="'+this.hue+'" />'),this.initHuePicker(),this.settingsWatchers=function(){e.watchSetting(e.params.choices.backgroundColor),e.watchSetting(e.params.choices.textColor)},this.settingsWatchers(),e.container.find(".expand-selectors").on("click",function(t){t.preventDefault(),e.container.find(".rating-containers-wrapper").toggleClass("hidden")})},initHuePicker:function(){var t=this,e=t.container.find(".color-hue");e.attr("value",this.hue),e.wpColorPicker({change:function(){setTimeout(function(){t.hue=parseInt(e.val(),10),t.updateColors(!0)},20)}})},setHue:function(){var t=this.setting.get();this.hue=t?wcagColors.getColorProperties(t).h:210},queryColors:function(t){var e,o;switch(t){case"AAA":e=7,o=3;break;case"AA":e=4.5,o=2;break;case"A":e=3,o=1}return this.allColors||(this.allColors=wcagColors.getAll({hue:this.hue,minHueDiff:0,maxHueDiff:3,stepDiff:3,stepSaturation:.025,stepLightness:.025})),this.allColors.pluck({color:wp.customize(this.params.choices.backgroundColor).get(),minContrast:e}).pluck({color:wp.customize(this.params.choices.textColor).get(),minContrast:o}).sortBy("s").getHexArray()},updateColors:function(t){var e;for(this.allColors=!1,this.colors={AAA:this.queryColors("AAA"),AA:this.queryColors("AA"),A:this.queryColors("A")},e=0;e<this.colors.AAA.length;e++)this.colors.AA.splice(this.colors.AA.indexOf(this.colors.AAA[e]),1);t&&this.updateColorValue()},watchSetting:function(t){var e=this;wp.customize(t,function(t){t.bind(function(){e.updateColors(!0)})}),-1<t.indexOf("[")&&wp.customize(t.split("[")[0],function(t){t.bind(function(){e.updateColors(!0)})})},getBest:function(){return this.colors.AAA[0]?this.colors.AAA[0]:this.colors.AA[0]?this.colors.AA[0]:this.colors.A[0]?this.colors.A[0]:void 0},updateColorValue:function(){this.getBest()&&this.container.find(".hidden-value-hex").attr("value",this.getBest()).trigger("change")}});